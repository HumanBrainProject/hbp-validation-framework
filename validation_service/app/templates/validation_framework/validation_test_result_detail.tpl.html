<html id="test-result-detail">

<head>

</head>



<body>
    <nav class="navbar ">
        <br>

        <button class="button-MC" ng-click="Context.validation_goToHomeView();">Home</button>&ensp;


        <h1 align=center> Test result ID: {{test_result.id}}</h1>
    </nav>
    <br>
    <div id=conteneur>
        <!--test result data -->
        <panel class=description-panel-validation-test-detail>
            <table class="table-create">
                <tbody>
                    <tr>
                        <td>
                            <b> Date: </b>
                        </td>
                        <td> {{test_result.timestamp | date:'d MMMM yyyy, hh:mm' : 'UTC' }} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Score ({{test_result.test_code.test_definition.score_type}}): </b>
                        </td>
                        <td>
                            <span precision=test_result.score>  </span>
                            <font class="glyphicon glyphicon-ok" ng-if="test_result.passed" color="green"> </font>
                            <!--<font class="glyphicon glyphicon-remove" ng-if="!test_result.data.passed" color="red"> </font>-->
                        </td>

                    </tr>
                    <tr>
                        <td>
                            <b> Runtime: </b>
                        </td>
                        <td> {{test_result.runtime}} </td>
                    </tr>
                </tbody>
            </table>
            <br>
            <br>
            <table>
                <tbody>
                    <tr>
                        <td>
                            <b> Project: </b>
                        </td>
                        <td> {{test_result.project}} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Platform: </b>
                        </td>
                        <td> {{test_result.platform}} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Hash: </b>
                        </td>
                        <td> {{test_result.hash}} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Result storage adress: </b>
                        </td>
                        <td>
                            <a href="{{storage_url}}"> {{storage_url}}  </a>
                        </td>
                    </tr>
                    <tr>
                        <td> <b>Storage folder name :</b></td>
                        <td>
                            <div> {{folder_name}} </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </panel>
        <panel class="caracteristics-panel-test-validation caracteristics-panel-testdetail-validation">
            <h4 align=center> <b>  Test and model parameters </b></h4>
            <br>
            <table class='table-create'>
                <tr>
                    <td style="width: 10%">
                        <table class="table-create">
                            <tbody>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.model_scope!=''">
                                    <td><b> Model scope: </b> {{test_result.model_version.model.model_scope }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.abstraction_level!=''">
                                    <td><b> Abstraction level: </b> {{test_result.model_version.model.abstraction_level}} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.cell_type!=''">
                                    <td> <b> Cell type: </b> {{test_result.model_version.model.cell_type }}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.brain_region!=''">
                                    <td> <b> Brain region: </b> {{ test_result.model_version.model.brain_region }}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.species!=''">
                                    <td><b> Species: </b> {{ test_result.model_version.model.species }} </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td style="width: 10%">
                        <table class="table-create">
                            <tbody>
                                <tr style="width: 15%">
                                    <td><b>Test type: </b> {{ test_result.test_code.test_definition.test_type }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.data_type!=''">
                                    <td> <b> Data type: </b> {{test_result.test_code.test_definition.data_type}}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.data_modality!=''">
                                    <td><b> Data modality: </b> {{test_result.test_code.test_definition.data_modality }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.age!=''">
                                    <td><b> Age: </b> {{test_result.test_code.test_definition.age }} </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </table>
        </panel>
        <br>
        <br>
    </div>
    <!--model and test info-->
    <div id="conteneur">

        <div class="element-left">
            <br>
            <table>
                <tr>
                    <h3 align=center> Model information </h3>
                </tr>


            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <td style="width: 15%"> <b> Model name:  </b> {{ test_result.model_version.model.name }} &nbsp;</td>
                        <td style="width: 15%"> <b> version name: </b> {{ test_result.model_version.version}} &nbsp;</td>

                    </tr>
                </tbody>
            </table>
            <br>
            <table class="table-create">
                <tbody>
                    <tr>
                        <b> Description: </b> <br><br>
                        <div markdown="test_result.model_version.model.description" ng-text-truncate="test_result.model_version.model.description" ng-tt-words-threshold="100" ng-tt-no-toggling></div>
                        <button class=linkbutton align=right text-align=right type="button" ng-mousedown="Context.goToValidationModelView($event,test_result.model_version.model)"> (more details on model results page)</button>
                        <br>
                        <button class=linkbutton align=right text-align=right type="button" ng-mousedown="Context.goToModelDetailView($event,test_result.model_version.model.id,'validation')"> (more details on model catalog)</button>

                        <br><br>
                    </tr>
                </tbody>
            </table>


        </div>
        <div class="element-middle"></div>
        <div class="element-right">
            <br>
            <table>

                <tr>
                    <h3 align=center> Test information </h3>
                </tr>
            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <td style="width: 15%"> <b> Test name: </b> {{ test_result.test_code.test_definition.name }} &nbsp;</td>
                        <td style="width: 15%"> <b> version name: </b> {{ test_result.test_code.version}} &nbsp;</td>
                    </tr>
                </tbody>
            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <b>Protocol: </b> <br><br>
                        <div markdown="test_result.test_code.test_definition.protocol" ng-text-truncate="test_result.test_code.test_definition.protocol" ng-tt-words-threshold="100" ng-tt-no-toggling></div>
                        <button class=linkbutton align=right text-align=right type="button" ng-mousedown="Context.goToTestDetailView($event,test_result.test_code.test_definition.id)">(more details on test results page)</button>
                        <br><br>
                    </tr>
                </tbody>
            </table>



        </div>

    </div>

    <div>



        <h2 align=center>Storage</h2>
        <br>
        <br>

        <script type="text/ng-template" id="nodes_renderer.html">
            <div ng-if="node.nodes" ui-tree-handle data-nodrag class="tree-node tree-node-content">
                <a class="btn btn-xs" data-nodrag ng-click="getFolderContent(this, node)">
                    <span class="glyphicon" ng-class="{'glyphicon glyphicon-folder-close': collapsed,'glyphicon glyphicon-folder-open': !collapsed}"></span>
                </a>
                {{node.name}} &emsp; {{node.created_on | date:'dd/MM/yyyy' : 'UTC'}}
            </div>
            <div ng-if="!node.nodes" ui-tree-handle data-nodrag class="tree-node tree-node-content">
                <a class="btn btn-xs" data-nodrag>
                    <span class="glyphicon glyphicon-file"></span>
                </a>
                {{node.name}} &emsp; {{node.created_on | date:'dd/MM/yyyy' : 'UTC' }}
                <a data-nodrag ng-if="node.content_type == 'image/jpeg' || node.content_type == 'image/png'" class="btn btn-xs glyphicon glyphicon-eye-open pull-right" ng-click="open_overview_file(node.uuid);">
                </a>
                <a data-nodrag class="btn btn-xs glyphicon glyphicon-download-alt pull-right" ng-click="download_file(node.uuid);"> </a>&ensp;

            </div>
            <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
                <li ng-repeat="node in node.nodes" data-nodrag ui-tree-node ng-include="'nodes_renderer.html'" data-collapsed="true">
                </li>
            </ol>
        </script>


        <!--main -->
        <div class="row">
            <div class="col-sm-12">
                <button class="button-MC" ng-click="expandAll()">Expand all</button>
                <button class="button-MC" ng-click="collapseAll()">Collapse all</button>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-sm-6">
                <div ui-tree id="tree-root">
                    <ol ui-tree-nodes ng-model="storage_files">
                        <li ng-repeat="node in storage_files" data-nodrag ui-tree-node ng-include="'nodes_renderer.html'" data-collapsed="true"></li>
                    </ol>
                </div>
            </div>
            <br>
            <br>
            <div align=center>
                <img src="{{image.src}}" width="600">
            </div>

            <br>
            <br>
            <br>
            <br>

</body>



</html>